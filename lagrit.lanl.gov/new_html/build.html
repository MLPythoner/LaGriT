<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Generator" content="Microsoft Word 98">
   <meta name="GENERATOR" content="Mozilla/4.7C-SGI [en] (X11; I; IRIX64 6.5 IP30) [Netscape]">
   <title>a</title>
</head>
<body text="#000000" bgcolor="#FFFFFF" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<b><font face="Times New Roman,Times">Building an executable and running
LaGriT</font></b>
<dir>
<dir><font face="Times New Roman,Times">The executable is built by linking
a driver routine with the code and utility libraries. The driver routine
must contain a call to </font><font face="Courier New,Courier">initlagrit</font><font face="Times New Roman,Times">
and a call to </font><font face="Courier New,Courier">control_command_lg</font><font face="Times New Roman,Times">
and must contain a subroutine called </font><font face="Courier New,Courier">user_sub</font><font face="Times New Roman,Times">.&nbsp;
The input arguments to </font><font face="Courier New,Courier">initlagrit</font><font face="Times New Roman,Times">
are:</font>
<dir><font face="Courier New,Courier">mode</font><font face="Times New Roman,Times">&nbsp;&nbsp;&nbsp;&nbsp;
- set to 'noisy' for output to be echoed to the screen - set to 'silent'
for no echo</font>
<br><font face="Courier New,Courier">log_file</font><font face="Times New Roman,Times">
- name of log file (if ' ' or '-def-' use default name which is </font><font face="Courier New,Courier">logx3dge</font><font face="Times New Roman,Times">n)&nbsp;
This file will contain a list of commands.</font>
<br><font face="Courier New,Courier">batch_file </font><font face="Times New Roman,Times">-
name of batch file (if ' ' or '-def-' use default name which is </font><font face="Courier New,Courier">outx3dgen</font><font face="Times New Roman,Times">)&nbsp;
This file will contain a list of commands and the error, warning and informational
messages generated by the command.&nbsp; </font><font face="Courier New,Courier">User_sub</font><font face="Times New Roman,Times">
is used to implement user commands (see <a href="writing.html">Section
IV.C</a>)</font></dir>
<font face="Times New Roman,Times">A sample driver routine is listed below:</font>
<br>&nbsp;
<dir><font face="Times New Roman,Times">&nbsp;&nbsp;&nbsp;&nbsp; </font><font face="Courier New,Courier">program
adrivgen</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C ################################################################</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C PURPOSE -LaGriT driver</font>
<br><font face="Courier New,Courier">C ################################################################</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; implicit
none</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; integer
ierror_return</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call
initlagrit('noisy',' ',' ')</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; call
control_command_lg(ierror_return)</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; stop</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; subroutine
user_sub(imsgin,xmsgin,cmsgin,msgtyp,nwds,</font>
<dir>
<dir>
<dir>
<dir>
<dir><font face="Courier New,Courier">ierr1)</font></dir>
</dir>
</dir>
</dir>
</dir>
<font face="Courier New,Courier">C ################################################################</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C PURPOSE -</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C Process user supplied commands</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C INPUT ARGUMENTS -</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C imsgin - integer array of tokens
returned by parser</font>
<br><font face="Courier New,Courier">C xmsgin - real array of tokens returned
by parser</font>
<br><font face="Courier New,Courier">C cmsgin - character array of tokens
returned by parser</font>
<br><font face="Courier New,Courier">C msgtyp - int array of token types
returned by parser</font>
<br><font face="Courier New,Courier">C nwds - number of tokens returned
by parser</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C OUTPUT ARGUMENTS -</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">C ierr1 - 0 for successful completion
- -1 otherwise</font>
<br><font face="Courier New,Courier">C ################################################################</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; character*32
cmsgin(nwds)</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; integer
imsgin(nwds),msgtyp(nwds)</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; integer
nwds,ierr1,lenc</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; real*8
xmsgin(nwds)</font>
<br><font face="Courier New,Courier">C set default error return to fail</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ierr1=-1</font>
<br><font face="Courier New,Courier">C Insert code here to handle user
coded subroutines</font>
<br><font face="Courier New,Courier">C For example</font>
<br><font face="Courier New,Courier">C if(cmsgin(1).eq.'my_cmnd') then</font>
<br><font face="Courier New,Courier">C call my_rtn(imsgin,xmsgin</font>
<br><font face="Courier New,Courier">C * cmsgin,msgtyp,nwds,ierr1)</font>
<br><font face="Courier New,Courier">C else</font>
<br><font face="Courier New,Courier">C ierr1=-1</font>
<br><font face="Courier New,Courier">C endif</font>
<br><font face="Courier New,Courier">C</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return</font>
<br><font face="Courier New,Courier">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end</font></dir>
<font face="Times New Roman,Times">Sample build scripts for the supported
platform are:</font>
<p><font face="Times New Roman,Times">Sun OS and Sun Solaris</font>
<br><font face="Times New Roman,Times">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
forte version 7 compiler:</font>
<dir>
<dir><font face="Times New Roman,Times">f90 -O2 -lf77compat -o lagritgen
adrivgen.f liblagrit.a libutil.a</font>
<br><font face="Times New Roman,Times">if the user wishes to link in user
subroutines that contain CRAY&nbsp;type pointer statements, these routines
must be compiled using the f77 compiler and then the .o files linked in
with f90:</font>
<br><font face="Times New Roman,Times">f77&nbsp; -c -O2 user_routines.f</font>
<br><font face="Times New Roman,Times">f90 -O2&nbsp; -lf77compat -o lagritgen
adrivgen.f user_routines.o liblagrit.a libutil.a</font></dir>
older sun compilers:
<dir><font face="Times New Roman,Times">f90 -O2 -o lagritgen adrivgen.f
liblagrit.a libutil.a</font></dir>
</dir>
<font face="Times New Roman,Times">IBM RISC</font>
<dir><font face="Times New Roman,Times">xlf -g -o lagritgen -qintlog -qcharlen=500
-brename:.fdate,.fdate_ adrivgen.f</font>
<br><font face="Times New Roman,Times">liblagrit.a libutil.a</font></dir>
<font face="Times New Roman,Times">SGI</font>
<dir><font face="Times New Roman,Times">f90 -O2 -n32 -r10000 -o lagritgen
adrivgen.f liblagrit.a libutil.a</font>
<p><font face="Times New Roman,Times">Compile for 64 bit I8 SGI:</font>
<br><font face="Times New Roman,Times">f90 -O2 -64 -i8 -o lagritgen adrivgen.f&nbsp;
liblagrit.a libutil.</font>
<br>&nbsp;
<br>&nbsp;</dir>
<font face="Times New Roman,Times">HP</font>
<dir><font face="Times New Roman,Times">f90&nbsp; +U77 -R8 -lm -o lagritgen
adrivgen.f liblagrit.a libutil.a</font></dir>
<font face="Times New Roman,Times">DEC</font>
<dir><font face="Times New Roman,Times">COMPAQ compiler</font></dir>
<font face="Times New Roman,Times">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
fort -i8 -O -fast -pipeline -transform_loops -o lagritgen&nbsp; adrivgen.f&nbsp;
liblagrit.a libutil.a</font>
<dir>
<dir><font face="Times New Roman,Times">&nbsp;</font></dir>
</dir>
<font face="Times New Roman,Times">LINUX</font>
<dir><font face="Times New Roman,Times">ABSOFT compiler</font>
<br><font face="Times New Roman,Times">f90 -YTEXT_NAMES=LCS&nbsp; -o lagritgen
adrivgen.f fdate.f liblagrit.a libutila. -lm -lu77</font>
<br><font face="Times New Roman,Times">where fdate.f is</font>
<dir><font face="Times New Roman,Times">subroutine fdate(string)</font>
<br><font face="Times New Roman,Times">character*(*) string</font>
<br><font face="Times New Roman,Times">call fdate_(string)</font>
<br><font face="Times New Roman,Times">return</font>
<br><font face="Times New Roman,Times">end</font>
<br><font face="Times New Roman,Times"></font>&nbsp;</dir>
<font face="Times New Roman,Times"></font></dir>

<dir>&nbsp;</dir>
<font face="Times New Roman,Times">To execute, use standard unix file redirection
for standard input and output. LaGriT will produce two additional files,
</font><font face="Courier New,Courier">outx3dgen</font><font face="Times New Roman,Times">
and </font><font face="Courier New,Courier">logx3dgen</font><font face="Times New Roman,Times">.
The names of these files can be changed by supplying the names as arguments
in the call to initlagrit.&nbsp; These files contain detailed output information
and the list of commands respectively. LaGriT may also be run interactively
in which case the user will be prompted to enter commands from the workstation.</font></dir>
</dir>

</body>
</html>
